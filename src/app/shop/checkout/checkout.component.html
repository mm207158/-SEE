<section class="section-b-space">
  <div class="container">
    <div class="checkout-page">
      <div class="checkout-form">
        <form
          [formGroup]="checkoutForm"
          (ngSubmit)="onSubmit(checkoutForm.value)"
        >
          <div class="row">
            <div class="col-lg-6 col-sm-12 col-xs-12">
              <div class="checkout-title">
                <h3>Billing Details</h3>
              </div>
              <div class="row check-out">
                <div class="form-group col-md-6 col-sm-6 col-xs-12">
                  <div class="field-label">First Name</div>
                  <input
                    type="text"
                    name="firstname"
                    [formControl]="checkoutForm.controls['firstname']"
                    placeholder="First name"
                    autocomplete="off"
                  />
                  <div
                    *ngIf="
                      checkoutForm.controls.firstname.touched &&
                      checkoutForm.controls.firstname.errors?.required
                    "
                    class="text text-danger"
                  >
                    First Name is required.
                  </div>
                  <div
                    *ngIf="
                      checkoutForm.controls.firstname.touched &&
                      checkoutForm.controls.firstname.errors?.pattern
                    "
                    class="text text-danger"
                  >
                    First Name must be an alphabates.
                  </div>
                </div>
                <div class="form-group col-md-6 col-sm-6 col-xs-12">
                  <div class="field-label">Last Name</div>
                  <input
                    type="text"
                    name="lastname"
                    [formControl]="checkoutForm.controls['lastname']"
                    placeholder="Last name"
                    autocomplete="off"
                  />
                  <div
                    *ngIf="
                      checkoutForm.controls.lastname.touched &&
                      checkoutForm.controls.lastname.errors?.required
                    "
                    class="text text-danger"
                  >
                    Last Name is required.
                  </div>
                  <div
                    *ngIf="
                      checkoutForm.controls.lastname.touched &&
                      checkoutForm.controls.lastname.errors?.pattern
                    "
                    class="text text-danger"
                  >
                    Last Name must be an alphabates.
                  </div>
                </div>
                <div class="form-group col-md-12 col-sm-12 col-xs-12">
                  <div class="field-label">Phone</div>
                  <input
                    type="text"
                    name="newPhoneNumber"
                    [formControl]="checkoutForm.controls['newPhoneNumber']"
                    placeholder="Phone number"
                    autocomplete="off"
                  />
                  <div
                    *ngIf="
                      checkoutForm.controls.newPhoneNumber.touched &&
                      checkoutForm.controls.newPhoneNumber.errors?.required
                    "
                    class="text text-danger"
                  >
                    Phone No is required.
                  </div>
                  <div
                    *ngIf="
                      checkoutForm.controls.newPhoneNumber.touched &&
                      checkoutForm.controls.newPhoneNumber.errors?.pattern
                    "
                    class="text text-danger"
                  >
                    Phone No is must be number.
                  </div>
                </div>
                <div class="form-group col-md-12 col-sm-12 col-xs-12">
                  <div class="field-label">Address</div>
                  <select
                    name="addressId"
                    [formControl]="checkoutForm.controls['addressId']"
                    (change)="onCityChange($event)"
                  >
                    <option value="" selected>Select City</option>
                    <option *ngFor="let city of addresses" [value]="city.addressId">
                      {{ city.city + " - " + city.street }}
                    </option>
                    <option value="new">Create New Address</option>
                  </select>
                  <div *ngIf="isCreatingNewCity">
                    <select
                      class="form-control mt-2"
                      placeholder="Enter new City"
                      [formControl]="checkoutForm.controls['cityId']"
                      (keyup.enter)="addNewCity()"
                    >
                      <option value="" selected>Select City</option>
                      <option *ngFor="let city of cities" [value]="city.id">
                        {{ city.cityName }}
                      </option>
                    </select>
                    <input
                      type="text"
                      class="form-control mt-2"
                      placeholder="Enter new street"
                      [formControl]="checkoutForm.controls['street']"
                      (keyup.enter)="addNewCity()"
                    />
                  </div>
                </div>
               
              </div>
              <div class="col-md-12 mt-4 mb-5">
                <button class="btn btn-sm btn-solid" type="submit">
                  Check OUT
                </button>
              </div>
            </div>
            <div class="col-lg-6 col-sm-12 col-xs-12">
              <div class="checkout-details">
                <div class="order-box">
                  <div class="title-box">
                    <div>Product <span> Total</span></div>
                  </div>
                  <ul class="qty" *ngIf="products.length">
                    <li *ngFor="let product of products">
                      {{ product.title }} Ã— {{ product.quantity }}
                      <span>
                        {{
                          (product.price | discount : product) *
                            productService?.Currency.price
                            | currency
                              : productService?.Currency.currency
                              : "symbol"
                        }}
                      </span>
                    </li>
                  </ul>
                  <ul class="qty" *ngIf="!products.length">
                    <li class="empty-checkout">
                      There are no products in cart
                    </li>
                  </ul>
                  <ul class="sub-total">
                    <li>
                      Subtotal
                      <span class="count">{{
                        (totalPrice * 0.3)
                          | currency
                            : productService?.Currency.currency
                            : "symbol"
                      }}</span>
                    </li>
                  </ul>
                  <ul class="total">
                    <li>
                      Total
                      <span class="count">{{
                        totalPrice + (totalPrice * 0.3)
                          | currency
                            : productService?.Currency.currency
                            : "symbol"
                      }}</span>
                    </li>
                  </ul>
                </div>

                <div class="payment-box" *ngIf="products.length">
                  <div class="upper-box">
                    <div class="payment-options">
                      <label for="payment-3"
                        ><span class="image"
                          ><img
                            src="assets/images/visa-mastercard2.png"
                            alt="" /></span
                      ></label>
                    </div>
                  </div>
                  <!-- <div class="text-end">
                    <button
                      type="submit"
                      class="btn-solid btn"
                      [disabled]="!checkoutForm.valid"
                      (click)="stripeCheckout()"
                      *ngIf="payment == 'Stripe'"
                    >
                      Place Order
                    </button>
                  </div> -->
                </div>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</section>
